<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cinema Editor - Subtitles</title>
    <!-- External CSS -->
    <link rel="stylesheet" href="../../css/subtitle_editor.css">
</head>
<body>
    <nav>
        <a href="subtitle_editor.html" class="active">ğŸ“ Subtitles</a>
        <a href="vocab_editor.html">ğŸ“– Vocabulary</a>
        <a href="visual_editor.html">ğŸ¨ Visuals</a>
        <button onclick="toggleSettings()" class="config-btn">âš™ï¸ Config</button>
    </nav>
    <div id="workspace">
        <div id="left-panel">
            <div id="video-container">
                <div id="player"></div>
                <div id="preview-overlay"></div>
            </div>
            <div id="global-controls">
                
                <!-- GITHUB CONFIGURATION & LOAD -->
                <div class="control-group">
                    <div class="group-title">GitHub Configuration</div>
                    <input id="ghUser" placeholder="User" style="width:48%; padding:5px; margin-bottom:5px;" value="hangkapiphang">
                    <input id="ghRepo" placeholder="Repo" style="width:48%; padding:5px; margin-bottom:5px;" value="taigi">
                    <input type="password" id="ghToken" placeholder="GitHub Token (for list/saving)" style="width:100%; padding:5px;">
                </div>

                <!-- FILE LOADER WITH LIST -->
                <div class="control-group load-group">
                    <div class="group-title blue-text">ğŸ“‚ Load File</div>
                    
                    <div style="display:flex; gap:5px; margin-bottom:8px;">
                        <button class="btn btn-orange" onclick="fetchFileList()">ğŸ”„ Get File List</button>
                        <select id="fileSelectDropdown" style="flex-grow:1; max-width:180px;" onchange="selectFileFromList(this.value)">
                            <option value="">(Click Get List)</option>
                        </select>
                    </div>

                    <div style="display:flex; gap:5px;">
                        <input id="targetFilename" type="text" style="flex-grow:1; padding:6px;" placeholder="Filename (e.g. suntiunn)">
                        <button class="btn btn-blue" onclick="fetchFromGithub()">â¬‡ Fetch</button>
                    </div>
                    <div style="text-align:center; margin:5px 0; font-size:11px; color:#666;">- OR -</div>
                    <button class="btn btn-grey" style="width:100%;" onclick="document.getElementById('hidden-file').click()">ğŸ“‚ Open Local File</button>
                    <input type="file" id="hidden-file" accept=".json" style="display:none" onchange="loadLocalJson(this)">
                </div>

                <!-- VIDEO URL -->
                <div class="control-group">
                    <input type="text" id="videoUrl" style="width:100%; padding:8px;" placeholder="YouTube URL" onchange="loadVideo(this.value)">
                </div>

                <!-- SAVE ACTIONS -->
                <div class="control-group">
                    <div class="group-title">ğŸ’¾ Save Actions</div>
                    <div style="display:flex; gap:5px; margin-bottom:5px;">
                        <button class="btn btn-green" style="flex:1;" onclick="downloadJson()">ğŸ’¾ JSON</button>
                        <button class="btn btn-teal" style="flex:1;" onclick="downloadSrt()">ğŸ“„ SRT</button>
                    </div>
                    <button class="btn btn-dark" style="width:100%;" onclick="uploadToGithub()">â˜ Update GitHub</button>
                </div>

            </div>
        </div>
        <div id="right-panel">
            <div id="toolbar">
                <button class="btn btn-blue" style="width:100%" onclick="addSubtitleLine()">+ Add New Line</button>
            </div>
            <div id="rows-area"></div>
        </div>
    </div>
    
    <!-- YouTube API -->
    <script src="https://www.youtube.com/iframe_api"></script>
    <!-- External JS -->
    <script src="../../js/subtitle_editor.js"></script>
</body>
</html>