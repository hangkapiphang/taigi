<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Voice Rush: Class Edition</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Bangers&family=Roboto:wght@500&display=swap" rel="stylesheet">
</head>
<body>

    <!-- === SETUP SCREEN === -->
    <div id="screen-setup" class="screen active">
        <h1>üõ†Ô∏è Game Setup</h1>
        
        <div class="scroll-area">
            <!-- Saved Decks -->
            <div class="section-title">üìö Saved Decks</div>
            <div class="library-list" id="library-container"></div>

            <!-- Active List Editor -->
            <div class="section-title">‚úèÔ∏è Active List (Current Game)</div>
            <div class="creator-box">
                <input type="text" id="new-emoji" placeholder="üòÄ" readonly onclick="openEmojiPicker()">
                <input type="text" id="new-name" placeholder="Name (e.g. Lion)" style="flex:1;">
                <button class="btn-add" onclick="addNewAnimal()">ADD</button>
            </div>
            <div class="animal-list" id="list-container"></div>
        </div>

        <div class="setup-footer">
            <div class="footer-tools">
                <button class="btn-tool" onclick="saveCurrentDeck()">üíæ Save Deck</button>
                <button class="btn-tool" onclick="exportData()">‚¨áÔ∏è .JSON</button>
                <button class="btn-tool" onclick="triggerImport()">üìÇ Load</button>
            </div>
            <!-- Hidden Input for file loading -->
            <input type="file" id="file-input" accept=".json" style="display:none" onchange="importData(this)">
            
            <button class="btn-play" onclick="goToGame()">START CLASS ‚ñ∂</button>
        </div>
    </div>

    <!-- === EMOJI PICKER MODAL === -->
    <div id="emoji-modal" onclick="closeEmojiPicker(event)">
        <div class="emoji-drawer" onclick="event.stopPropagation()">
            <div class="drawer-header">
                <span>Pick an Emoji</span>
                <button class="close-btn" onclick="togglePicker(false)">Close</button>
            </div>
            <div class="emoji-grid-container" id="emoji-content"></div>
        </div>
    </div>

    <!-- === GAME SCREEN === -->
   <div id="screen-game" class="screen">
        <div class="header">
            <!-- UPDATED: Shows Tournament Number -->
            <div><span id="tournament-display">üèÜ Match 1/3</span></div>
            <div><span id="player-display">Student 1</span></div>
        </div>
            
        <!-- Timer Bar -->
        <div class="timer-container"><div class="timer-bar" id="timer-bar"></div></div>
        
        <!-- The Card Grid -->
        <div class="grid" id="grid"></div>
        
        <!-- Status & Mic Indicator -->
        <div class="status-container">
            <div class="mic-indicator" id="mic-led"></div>
            <div class="status-text" id="status-text">Mic Ready</div>
        </div>

        <!-- Start Ranked Mode Button -->
        <button id="btn-start-round" class="start-round-btn" onclick="beginRankedRound()">‚è∞ START TIMER</button>

        <div class="back-link" onclick="goToSetup()">Exit to Editor</div>
    </div>

    <!-- === OVERLAY (Intermission & Scores) === -->
    <div id="overlay">
        <h1 id="overlay-title" style="font-size: 3rem;">NEXT PLAYER</h1>
        <p id="overlay-sub" style="font-size: 1.5rem; margin-top:0;">Pass to Student 2</p>
        
        <div class="score-board" id="score-list" style="display:none;"></div>

        <button id="overlay-btn" class="intermission-btn" onclick="startNextPlayer()">READY!</button>
    </div>

    <script src="script.js"></script>
</body>
</html>
